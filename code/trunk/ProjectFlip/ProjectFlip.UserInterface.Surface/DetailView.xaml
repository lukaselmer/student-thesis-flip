<UserControl x:Class="ProjectFlip.UserInterface.Surface.DetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="http://schemas.microsoft.com/surface/2008">
    
    <UserControl.Resources>
        <DataTemplate x:Key="MetadataTemplate">
            <s:SurfaceButton Background="#ffd869" CommandParameter="{Binding}" Command="{Binding DataContext.AddFilterCommand, RelativeSource={RelativeSource AncestorType={x:Type s:SurfaceListBox}}}" >
                <TextBlock Text="{Binding Description}" TextWrapping="WrapWithOverflow" ></TextBlock>
            </s:SurfaceButton>
        </DataTemplate>

        <DataTemplate x:Key="FilterMainCriteriaTemplate">
            <s:SurfaceButton Background="#d5d5d5" >
                <TextBlock Text="{Binding Name}"></TextBlock>
            </s:SurfaceButton>
        </DataTemplate>

        <DataTemplate x:Key="FilterSubCriteriaTemplate">
            <s:SurfaceButton Background="#ffd869" CommandParameter="{Binding}" Command="{Binding DataContext.AddFilterCommand, RelativeSource={RelativeSource AncestorType={x:Type s:SurfaceListBox}}}" >
                <TextBlock Text="{Binding Description}"></TextBlock>
            </s:SurfaceButton>
        </DataTemplate>

        <DataTemplate x:Key="MetadataListTemplate">
            <StackPanel>
                <Label Background="Gray" >
                    <TextBlock Text="{Binding Key.Name}"></TextBlock>
                </Label>

                <s:SurfaceListBox ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" VerticalAlignment="Center" ItemsSource="{Binding Value}" ItemTemplate="{DynamicResource MetadataTemplate}" />

            </StackPanel>
        </DataTemplate>

        <Style x:Key="BackgroundButtonStyle" TargetType="s:SurfaceButton">
            <Setter Property="Background" Value="#AA000000" />
        </Style>

        <Style x:Key="NavigateButtonStyle" TargetType="s:SurfaceButton">
            <Setter Property="Background" Value="White" />
        </Style>

        <Style TargetType="s:SurfaceButton">
            <Setter Property="Height" Value="80"/>
            <Setter Property="Width" Value="200"/>
            <Setter Property="Background" Value="#ffd869"/>
            <Setter Property="Margin" Value="10" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="s:SurfaceButton">
                        <Border 
                            CornerRadius="10"
                            Background="{TemplateBinding Background}">
                            <ContentPresenter 
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                            </ContentPresenter>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ItemsPanelTemplate x:Key="ItemPanelTemplate">
            <StackPanel Margin="0">
                <StackPanel.Resources>
                    <Style TargetType="s:SurfaceListBoxItem">
                        <Setter Property="Margin" Value="0" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="Background" Value="Transparent" />
                    </Style>
                </StackPanel.Resources>
            </StackPanel>
        </ItemsPanelTemplate>

    </UserControl.Resources>

    <Grid>
        <s:SurfaceButton Style="{StaticResource BackgroundButtonStyle}" Command="{Binding HideDetailsCommand}" />
    
        <Grid x:Name="LayoutRoot">
          <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.2*"/>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="240"/>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="0.2*"/>
          </Grid.ColumnDefinitions>


            <s:SurfaceButton Style="{StaticResource NavigateButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Grid.Column="1" x:Name="ToLeftButton" Command="{Binding NavigateToLeftCommand}">
                <TextBlock TextWrapping="Wrap">nach links</TextBlock>
            </s:SurfaceButton>

            <s:SurfaceListBox ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Gray" VerticalAlignment="Center" Grid.Column="2" ItemsSource="{Binding CurrentProjectNote.Metadata}" ItemTemplate="{DynamicResource MetadataListTemplate}" ItemsPanel="{DynamicResource ItemPanelTemplate}" >
        </s:SurfaceListBox>

     
        <DocumentViewer Grid.Column="3" Margin="8" Document="{Binding CurrentProjectNote.Document}" />

            <s:SurfaceButton Style="{StaticResource NavigateButtonStyle}" VerticalAlignment="Center" Margin="0,0,0,8" Grid.Column="4" x:Name="ToRightButton" Command="{Binding NavigateToRightCommand}">
            <TextBlock TextWrapping="Wrap">nach rechts</TextBlock></s:SurfaceButton>
      </Grid>
    </Grid>
</UserControl>
